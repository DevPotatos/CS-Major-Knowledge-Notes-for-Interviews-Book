## 캐시
> 캐시란 데이터를 미리 복사해 놓는 임시 저장소이자 CPU와 주기억장치의 속도 차이에 따른 병목 현상을 줄이기 위한 메모리이다.

### 지역성
지역성이란 CPU가 일정 시간 동안 집중적으로 특정 주소 영역을 참조하는 경향을 의미한다. 캐시 메모리는 크기가 작기 때문에 당장 실행할 프로그램의 코드와 데이터의 일부를 저장할 수 밖에 없다. 따라서 많이 활용되는 데이터를 선별해야 하는데 이때 사용되는 것이 지역성이며 지역성은 **시간 지역성**과 **공간 지역성**으로 나뉜다.

#### 1. 시간 지역성
시간 지역성은 최근 사용한 데이터에 다시 접근하려는 특성을 의미한다. 대표적인 예로는 반복문이 있다.
#### 2. 공간 지역성
공간 지역성은 최근 접근한 데이터를 이루고 있는 공간이나 그 가까운 공간에 접근하는 특성을 의미한다. 대표적인 예로는 배열이 있다.

<br>

### 캐시히트와 캐시미스
#### 1. 캐시히트
캐시에서 원하는 데이터를 찾은 경우를 캐시히트라고 한다.

#### 2. 캐시미스
원하는 데이터가 캐시에 존재하지 않아 주메모리로 가서 데이터를 찾아오는 경우를 캐시 미스라고 한다.

#### 3. CPU와 기억장치의 상호작용
1. CPU가 데이터를 요청하면 먼저 캐시에서 데이터를 탐색한다.
2. 만약 캐시가 존재하는 경우(캐시히트), 캐시에 저장된 데이터를 제공한다.
3. 만약 캐시가 존재하지 않는 경우(캐시미스), 상위 캐시 메모리나 주기억장치에서 데이터를 가져와 제공한다.

<br>

### 캐싱 라인

캐싱 라인이란 캐시에 데이터가 저장할 때 자료구조를 활용해 묶어서 저장하는 것을 의미한다. 캐싱 라인은 CPU가 캐시 메모리에서 목적 데이터에 바로 접근하기 위해 만들어졌으며 직접 매핑, 연관 매핑, 집합 연관 매핑이 존재한다.

#### 1. 직접 매핑
<img src="https://velog.velcdn.com/images/kangdev/post/b3d9984b-0c2f-4f18-88ad-a0393452b277/image.png" width=400>

가장 간단한 방법이다. 메인 메모리를 일정한 크기의 블록으로 나누어 각각의 블록을 캐시의 정해진 위치에 매핑하는 방법이다. 하지만 여러 메모리 주소가 동일한 캐시 메모리 위치로 매핑되는 충돌 발생이 잦다.

#### 2. 연관 매핑
비어있는 캐시 메모리를 탐색해서 집어넣고 데이터가 있는지 찾을때도 순차적으로 탐색해서 가져오는 방식이다. 충돌이 적지만 데이터를 찾을 때 순차적으로 탐색하므로 속도가 느리다.

#### 3. 집합 연관 매핑
직접 매핑과 연관 매핑을 합쳐놓은 방식이다. 캣를 일정 개수의 집합으로 나눈 뒤에 각 집합마다 캐싱 라인을 할당한다. 그래서 캐시에 데이터를 저장할 때, 어떤 집합에 저장할지 결정한 후 해당 집합 내에서 빈 공간을 찾아 데이터를 저장하는 방식이다. 직접 매핑보다 시간이 더 걸리지만 충돌 위험이 적다.

---
### References
https://yanacoding.tistory.com/entry/CS-%EC%BA%90%EC%8B%9CCache%EB%9E%80

https://gyoogle.dev/blog/computer-science/operating-system/Memory.html

https://velog.io/@kangdev/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%BA%90%EC%8B%B1-%EB%9D%BC%EC%9D%B8-Caching-line

https://gusrb3164.github.io/computer-science/2021/04/28/caching-line/