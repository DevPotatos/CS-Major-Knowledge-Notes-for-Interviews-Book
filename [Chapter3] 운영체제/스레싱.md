## 스레싱(Thrashing)
> 스레싱이란 **빈번한 페이지 폴트로 인해 CPU 활용률이 낮아지는 현상**이다.

<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FVsWVK%2FbtrmKZk8Pwo%2F8zHt8LEjKaQZebHTFGD3f1%2Fimg.png" width="400">

### 스레싱 발생 원인
#### 1. 다중프로그래밍 정도가 과도한 경우
**다중프로그래밍 정도**는 메모리에 동시에 올라가있는 프로세스의 수를 의미한다. 다중프로그래밍 정도가 높아지면 각 프로세스에게 할당되는 메모리의 양이 적어지고 이로 인해 프로세스가 필요한 페이지들을 충분히 적재하지 못하여 **페이지 폴트가 발생할 가능성이 증가**하게 된다. 빈번한 페이지 폴트 발생 시, 스왑 인(swap in)/스왑 아웃(swap out)으로 인해 **디스크 I/O이 증가**하고 원하는 페이지가 메모리에 적재될 때까지 CPU가 기다리게 되어 **CPU 활용률이 감소**하게 된다.

#### 2. 메모리 할당 정책이나 페이지 교체 알고리즘이 잘못되었을 경우
프로세스에게 실행에 필요한 최소 페이지 수보다 작은 수의 프레임이 할당되거나 잘못된 페이지 교체 알고리즘에 의해 곧 사용될 페이지를 교체하는 경우, 페이지 폴트가 빈번하게 발생할 가능성이 높다.

<br>

이 밖에도, 컴퓨터 시스템에 설치된 메모리가 절대적으로 작은 경우나 우연히 특정 시간대에 너무 많은 프로세스를 실행한 경우에도 스레싱이 발생한다.

<br>

### 스레싱 해결 방법
#### 1. 작업 세트(working set)
CPU가 일정 시간 동안 집중적으로 특정 주소 영역을 참조하는 경향을 **참조의 지역성**이라고 한다. **작업 세트**란 지역성을 통해 결정된 페이지 집합을 만들어서 미리 메모리에 로드하는 것이다. 미리 메모리에 로드하면 탐색에 드는 비용을 줄일 수 있고 스와핑도 줄일 수 있다.

작업 세트를 이용하기 위해서는 작업 세트를 구성하는 페이지들을 적재할 수 있는 메모리 공간이 필요하다. 만약 공간이 없는 경우, 기존 메모리에 존재하는 페이지를 디스크로 스왑 아웃시켜 공간을 확보한다. 프로세스가 실행되는 과정에서 작업 세트가 변하는 경우, 갑자기 페이지 폴트가 계속되며 시간이 지나면 페이지 폴트가 줄고 새로운 페이지들로 작업 집합이 형성된다.

#### 2. PFF(Page Fault Frequency)
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fba6BDF%2FbtrmNoR1kMb%2FvTdkrLK8BQlUO1x0zDD3Vk%2Fimg.png" width="400">

페이지 폴트 빈도를 조절하는 방법으로 상한선과 하한선을 만드는 방법이다. 프로세스의 페이지 폴트 빈토를 주기적으로 조사하여 각 프로세스에 할당할 메모리 양을 동적으로 조절한다. 만약 상한선에 도달한다면 프레임을 늘리고 하한선에 도달한다면 프레임을 줄이는 것이다.
```
페이지 부재율이 높다 = 프로세스가 더 많은 프레임을 필요로 한다.
페이지 부재율이 낮다 = 프로세스가 너무 많은 프레임을 갖고 있다.
```
<br>

이 밖에도, 스레싱 해결을 위해 컴퓨터 메모리를 늘리는 방법도 존재한다.

---
### References
https://zangzangs.tistory.com/144

https://eunajung01.tistory.com/89
